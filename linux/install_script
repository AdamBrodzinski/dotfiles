#!/bin/bash

set -e
set -x

# update the package database
sudo pacman -Syy

# AUR
sudo pacman -S yay

# cli tools
sudo pacman -S ack
sudo pacman -S curl
sudo pacman -S fd
sudo pacman -S jq
sudo pacman -S less
sudo pacman -S stow
sudo pacman -S tldr
sudo pacman -S trash-cli
sudo pacman -S tree
sudo pacman -S wget
sudo pacman -S xsel
sudo pacman -S z

# programming tools
sudo pacman -S git
sudo pacman -S docker
systemctl enable docker.service
sudo pacman -S lazygit
sudo pacman -S lazydocker
sudo pacman -S ripgrep
sudo pacman -S neovim
yay -S asdf-vm.git

# language support
# sudo pacman -S opam
# see asdf readme for erlang install on arch

# --------- Desktop environment
sudo pacman -S flatpack
yay -S ttf-ms-fonts
flatpack install chrome

# gnome desktop
yay -S ulauncher
yay -S gnome-shell-extension-forge
yay -S gnome-shell-extension-space-bar
# gnome themes
sudo pacman -S gnome-browser-connector

# --------- Setup framework13

COMPUTER_MAKER=$(sudo dmidecode -t system | grep 'Manufacturer:' | awk '{print $2}')

if [ "$COMPUTER_MAKER" == "Framework" ]; then

	# enable intercept plugin
	# https://wiki.archlinux.org/title/Interception-tools
	sudo pacman -S interception-tools interception-caps2esc
	systemctl enable udevmon

	sudo pacman -S bluez bluez-utils
	sudo systemctl enable bluetooth
	# https://wiki.archlinux.org/title/Network_configuration/Wireless#Respecting_the_regulatory_domain
	sudo pacman -S wireless-regdb
fi
